var responsiveHelper_datatable_tabletools=void 0,breakpointDefinition={tablet:1024,phone:480};function do_edit(o){window.location.href="update/"+o}function do_toggle(o){confirm("Update visible menu?")&&$.ajax({url:"/dashboard/menu-dashboard-update-ajax/"+o,success:function(o){console.log(o),"True"==o?window.location.href="/dashboard/menu-dashboard":alert("Gagal update menu!")}})}function do_delete(o,t){confirm('Anda yakin menghapus data "'+t+'"?')&&(window.location.href="delete/"+o)}function do_create(o,t){$(o).click(function(){window.location.href=t})}function do_cancel(o,t,e){$(o).click(function(){confirm('Batalkan proses "'+t+'"?')&&(window.location.href=e)})}function do_create_table(o,d=!1,p=!0,u=!0,f="#do_create",h=!1){$.ajax({url:o,dataSrc:"",success:function(o){var t=[],e=[],a={},n=!0,l={},r="",s=-1,c=-1;for(key in o){if(n){for(i in tmp=Object.keys(o[key]))"icon"==tmp[i]?t.push({title:"",data:tmp[i]}):t.push({title:tmp[i],data:tmp[i]}),3==i&&(r=tmp[i]),"Foto"==tmp[i]&&(s=i),"Tree"==tmp[i]&&(c=i);n=!n}for(j in(l=o[key]).icon=null,l.action=null,l)null!=l[j]&&"string"==typeof l[j]&&(l[j]=l[j].replace(/<\/?("[^"]*"|'[^']*'|[^>])*(>|$)/g,""));e.push(l)}a.columns=t,a.data=e,d&&1<=e.length&&$(f).hide(),0<a.data.length?$("#datatable_tabletools").DataTable({deferRender:!0,data:a.data,columns:a.columns,order:[[2,"desc"]],columnDefs:[{targets:[1,2],visible:!1,searchable:!1},{targets:0,width:"5px",sortable:!1,searchable:!1},{targets:[a.columns.length-2],width:"100px",sortable:!1,searchable:!1},{targets:[-1<s?parseInt(s):"-1"],render:function(o){return console.log("inside target",o),null!=o?'<img src="/media/'+o+'" class="img-thumbnail">':"tidak ada"}},{targets:[-1<c?parseInt(c):"-1"],render:function(o){return null!=o?o.replaceAll("_>",'<i class="fa fa-long-arrow-right"></i> '):""}},{targets:[3],render:function(o,t,e){return h?"<a href='javascript:void(0);' onclick='do_toggle(\""+e.uuid+"\");' title='Toggle Data'><strong>"+o+"</strong></a>":"<a href='javascript:void(0);' onclick='do_edit(\""+e.uuid+"\");' title='Edit Data'><strong>"+o+"</strong></a>"}},{targets:[a.columns.length-1],width:"60px",sortable:!1,searchable:!1,render:function(o,t,e){var a="",n=e[r];return n=(n=n.replaceAll("'","")).replaceAll('"',""),p&&(a="<button onclick='do_edit(\""+e.uuid+"\");' class='btn btn-success btn-xs' title='Edit Data'>     <i class='fa fa-edit'></i> </button> "),u&&(a=a+"<button onclick='do_delete(\""+e.uuid+'", "'+n+"\");' class='btn btn-danger btn-xs' title='Hapus Data'>     <i class='fa fa-eraser'></i> </button>"),"<div class='toolbar text-right'>"+(a=h?"<button onclick='do_toggle(\""+e.uuid+"\");' class='btn btn-success btn-xs' title='Toggle Data'>     <i class='fa fa-edit'></i> </button> ":a)+"</div>"}}],sDom:"<'dt-toolbar text-right'<'col-xs-12 col-sm-6 'f><'toolbar'>r>t<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-sm-6 col-xs-12'p>>",autoWidth:!0}):($("#no-data").empty(),$("#no-data").append('<p class="alert alert-info no-margin">No data to display ...  </p>'))}})}function openWA(o,t,e=!1){e?window.open("https://api.whatsapp.com/send?phone="+o+"&text="+t,"_blank"):window.open("https://web.whatsapp.com/send?phone="+o+"&text="+t,"_blank")}$(document).ready(function(){var t,e,l=$("#image"),a={left:0,top:0,width:400,height:400},i=0,r=0;$("#id_file_path").on("change",function(){var o;this.files&&this.files[0]&&((o=new FileReader).onload=function(o){$("#image").attr("src",o.target.result),$("#form-id").val("photo"),$("#modalCrop").modal("show")},o.readAsDataURL(this.files[0]))}),$("#modalCrop").on("show.bs.modal",function(){$(".js-crop-and-upload").removeAttr("disabled").text("Crop and Upload"),i=$("#id_dim_w").val(),r=$("#id_dim_h").val();var o=i/r;console.log("aspect ratio",o),l.cropper({viewMode:0,aspectRatio:o,zoomable:!0,dragMode:"move",center:!0,cropBoxResizable:!0,ready:function(){l.cropper("setCropBoxData",a),l.cropper("setCanvasData",e),l.cropper("setCropBoxData",t)}})}).on("hidden.bs.modal",function(){console.log("on hidden event"),t=l.cropper("getCropBoxData"),e=l.cropper("getCanvasData"),l.cropper("destroy")}),$(".js-zoom-in").on("click",function(){console.log("inside zoom in"),l.cropper("zoom",.1)}),$(".js-zoom-out").on("click",function(){l.cropper("zoom",-.1)}),$(".js-move-to-0-0").on("click",function(){console.log("inside move 0,0"),l.cropper("moveTo",0)}),$(".js-crop-and-upload").on("click",function(){$(".js-crop-and-upload").attr("disabled",!0).text("Processing ...");l.cropper("getData");var a=$("#form-id").val(),o=l.cropper("getCroppedCanvas"),n=$("#id_save_as_png").val();console.log("save_as_png=",n),o.toBlob(function(o){var t=new FormData,o=(t.append("photo",o),$('input[name="csrfmiddlewaretoken"]').val()),e=(console.log("value before upload = "),console.log($("#id_file_path").val()),console.log(a),"");"1"==n&&(e="1/",console.log("do save as png")),$.ajax("/dashboard/upload-photo/"+i+"/"+r+"/"+e,{method:"POST",data:t,processData:!1,contentType:!1,async:!1,cache:!1,timeout:3e4,headers:{"X-CSRFToken":o},success:function(o){console.log("response = "),console.log(o),$("#id_str_file_path").val(o),$("#modalCrop").modal("hide")},error:function(){console.log("Upload error")}})})});try{var o=$(window).height()/2;$(window).on("scroll",function(){$(this).scrollTop()>o?$("#myBtn").addClass("show-btn-back-to-top"):$("#myBtn").removeClass("show-btn-back-to-top")}),$("#myBtn").on("click",function(){$("html, body").animate({scrollTop:0},300)})}catch(o){console.log(o)}});